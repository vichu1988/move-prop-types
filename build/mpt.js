#!/usr/bin/env node 
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var propReplace=_interopDefault(require("commander")),process=require("process"),chalk=_interopDefault(require("chalk")),global$1="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;"function"==typeof global$1.setTimeout&&(cachedSetTimeout=setTimeout),"function"==typeof global$1.clearTimeout&&(cachedClearTimeout=clearTimeout);function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(o){try{return cachedSetTimeout.call(null,e,0)}catch(o){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(o){try{return cachedClearTimeout.call(null,e)}catch(o){return cachedClearTimeout.call(this,e)}}}var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var o=queue.length;o;){for(currentQueue=queue,queue=[];++queueIndex<o;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,o=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var o=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)o[r-1]=arguments[r];queue.push(new Item(e,o)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(e,o){this.fun=e,this.array=o}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv$1=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var o=.001*performanceNow.call(performance),r=Math.floor(o),t=Math.floor(o%1*1e9);return e&&(r-=e[0],(t-=e[1])<0&&(r--,t+=1e9)),[r,t]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process$1={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv$1,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},version$1="0.6.0",es6PropTypeJust=/,\s?{\sPropTypes\s}/g,es6PropTypeRight=/,\s?PropTypes\s?}/g,es6PropTypeLeft=/PropTypes\s?,/g,fileEncoding="utf-8",importState="\nimport PropTypes from 'prop-types';",reactProto=/React.PropTypes./g,_require=require("fs"),lstatSync=_require.lstatSync,readdir=_require.readdir,readFile=_require.readFile,stat=_require.stat,writeFile=_require.writeFile,_require2=require("child_process"),exec=_require2.exec,installPackage=function(){console.log("");try{require.resolve("prop-types"),console.log(chalk.cyan.underline.bold("prop-types")+" is already installed in your project"),console.log("")}catch(e){console.log("Installing prop-types to your project"),exec("npm i --color=always prop-types -S",function(e,o,r){if(e)return console.log("stderr: "+r),void console.log("");console.log(""+chalk.hex("#FF6347").bold("Installation underway")),console.log(o),console.log(""),console.log(chalk.cyan.underline.bold("prop-types")+" is now installed"),console.log(""),console.log("Thank you for using the package, if you like it, do "+chalk.red.bold("star")+" the repo"),console.log("")})}},writeFileAsyncEs6=function(e){readFile(e,fileEncoding,function(o,r){if(o)throw o;var t=es6PropTypeJust.test(r)||es6PropTypeLeft.test(r)||es6PropTypeLeft.test(r),n=-1!==r.indexOf(importState);if(t&&!n){var i="string"==typeof r?r.replace(es6PropTypeJust,""):r;(i="string"==typeof(i="string"==typeof(i=(i=i.replace(es6PropTypeLeft,"")).replace(es6PropTypeRight," }"))?i.replace(reactProto,"PropTypes."):i)?[i.slice(0,i.indexOf("';\n")+2),importState,i.slice(i.indexOf("';\n")+2)].join(""):i)&&writeFile(e,i,fileEncoding,function(e){if(e)throw e})}}),console.log(chalk.magenta.italic(e)+" just got "+chalk.green("updated")+"!")},updateFile=function(e,o){if(/[.]/.exec(o)){if(!/\S+.js[x]?$/.test(o))return}else stat(o+".js",function(e){e&&("ENOENT"===e.code&&console.log(chalk.magenta.italic(o+".js")+" doesn't "+chalk.red.inverse("seem to exist in the given path")),console.log("error : "+e)),o+=".js"}),stat(o+".jsx",function(e){e&&("ENOENT"===e.code&&console.log(chalk.magenta.italic(o+".jsx")+" doesn't "+chalk.red.inverse("seem to exist in the given path")),console.log("error : "+e)),o+=".jsx"});writeFileAsyncEs6(o),"updateFolder"!==e&&console.log("Thank you for using the package, if you like it, do "+chalk.red.bold("star")+" the repo")},updateFolder=function e(o,r){console.log(""),readdir(r,function(o,t){o&&console.log("error : "+o);t.filter(function(e){return lstatSync(r+"/"+e).isDirectory()}).map(function(o){e("updateFolder",r+"/"+o)});t.filter(function(e){return!lstatSync(r+"/"+e).isDirectory()}).forEach(function(e){updateFile("updateFolder",r+"/"+e)}),console.log(""),console.log("folder "+chalk.underline.yellowBright(r)+" and js/jsx files inside are now "+chalk.greenBright("ready")+"!"),console.log(""),console.log("Thank you for using the package, if you like it, do "+chalk.red.bold("star")+" the repo"),console.log("")})},helpExamples=function(){console.log(""),console.log("  Examples:"),console.log(""),console.log("    $ prop-replace --help for info"),console.log("    $ prop-replace -P ../dir1/dir2/filename.[js|jsx] , This will run replace only on the given file."),console.log("    $ prop-replace -F ../dir1/dir2 , This will run the update for all the files inside the given directory"),console.log("    $ prop-replace -I -F ../dir1/dir2 , This will install prop-types to dependencies and run the update for all the files inside the given directory"),console.log("")},findMatch=function(e,o){var r=0;if(e instanceof Array)return e.filter(function(t){t!==o[0]&&t!==o[1]||(r=e.indexOf(t)+1)}),r?e[r]:""};-1===process.argv.indexOf("--install")&&-1===process.argv.indexOf("-I")&&-1===process.argv.indexOf("--path")&&-1===process.argv.indexOf("-P")&&-1===process.argv.indexOf("--folder")&&-1===process.argv.indexOf("-F")&&process.argv.push("--help");var filePath=findMatch(process.argv,["--path","-P"]),folderPath=findMatch(process.argv,["--folder","-F"]);propReplace.command("move-prop-types").alias("mpt").usage("[options] [file|folder]").version(""+version$1).option("-I, --install","install the latest proptypes and then continue with rest of the commands",installPackage,{cmd:process$1.argv}).option("-P, --path","input path information of the file to update",updateFile,filePath).option("-F, --folder","input folder info where all the files would be updated",updateFolder,folderPath).on("--help , -H",helpExamples).parse(process.argv),propReplace.cli=!0,exports.mpt=propReplace;
